# WebSocket 监控系统 - 快速使用指南

## 🚀 立即开始

### 第一步：准备环境
```bash
# 确保已安装 Python 3.8+
python --version

# 进入监控系统目录
cd ai_monitor

# 安装依赖
pip install -r requirements.txt
```

### 第二步：配置监控目标
编辑 `config.json` 文件：
```json
{
    "websocket_url": "ws://localhost:8000/ws/chat"
}
```
将 URL 改为您要监控的 WebSocket 服务器地址。

### 第三步：启动监控
```bash
# Windows 用户可以直接双击
start_monitor.bat

# 或者使用命令行
python main.py all
```

### 第四步：查看结果
- 🌐 **监控面板**: http://localhost:8001
- 📊 **实时统计**: 在面板中查看消息数量、用户活动
- 🔍 **消息搜索**: 使用搜索功能查找特定消息
- 💾 **数据导出**: 数据自动保存在 `data/chat_monitor.db`

## 📋 功能清单

✅ **实时监控** - 监控 WebSocket 聊天消息  
✅ **数据存储** - 自动保存到 SQLite 数据库  
✅ **Web界面** - 现代化监控面板  
✅ **消息搜索** - 支持关键词搜索  
✅ **统计分析** - 用户活动和消息趋势  
✅ **自动重连** - 网络中断后自动恢复  
✅ **日志记录** - 详细的运行日志  

## 🛠️ 高级配置

### 监控特定关键词
修改 `monitor_client.py`，在消息处理中添加关键词检测：
```python
alert_keywords = ["重要", "紧急", "错误"]
```

### 自定义Web端口
```bash
python main.py all --port 8080
```

### 监控多个服务器
复制整个 `ai_monitor` 文件夹，修改不同的配置文件。

## 📊 数据分析

### 查看数据库
```bash
sqlite3 data/chat_monitor.db
.tables
SELECT * FROM chat_messages LIMIT 10;
```

### 导出数据
```bash
sqlite3 -header -csv data/chat_monitor.db "SELECT * FROM chat_messages;" > messages.csv
```

## 🔧 故障排除

**问题1: 无法连接到WebSocket服务器**
- 检查URL是否正确
- 确认目标服务器正在运行
- 检查防火墙设置

**问题2: Web界面无法访问**
- 检查端口是否被占用
- 尝试更换端口：`--port 8080`

**问题3: 数据库错误**
- 检查磁盘空间
- 确保有写入权限

## 📞 获取帮助

- 📖 查看 `README.md` 获取详细文档
- 🧪 运行 `python example_usage.py` 查看使用示例
- 📝 检查 `logs/` 目录下的日志文件

## ⚠️ 重要提醒

1. **合规使用**: 确保监控行为符合法律法规
2. **隐私保护**: 妥善保护监控到的数据
3. **资源监控**: 长期运行时注意磁盘空间
4. **备份数据**: 定期备份重要监控数据

---
**祝您使用愉快！如有问题欢迎反馈。**
